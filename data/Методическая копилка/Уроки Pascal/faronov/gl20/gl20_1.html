<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<head>
<title>
</title>
<meta http-equiv="Content-Type" content="text/html;charset=windows-1251">
</head>
<body BGCOLOR="#E7E3E7" TEXT="#000000" LINK="#004080" VLINK="#004080">

<table COLS="3" width="%">
<tr>
<td>
<font face="Arial, Helvetica, sans-serif">
<a href="gl20.html">
<img SRC="Back.gif" BORDER="0"  >
</a>
</font>
</td>
<td width="%">
<font face="Arial, Helvetica, sans-serif">
<a href="../index.html">
<img SRC="Menu.gif" BORDER="0"  >
</a>
</font>
</td>
<td ALIGN="RIGHT">
<font face="Arial, Helvetica, sans-serif">
<a href="gl20_2.html">
<img SRC="For.gif" BORDER="0"  >
</a>
</font>
</td>
</tr>
</table>

<p>
&nbsp;
</p>
<p align="center">
<font face="Arial, Helvetica, sans-serif" size="3">
<b>
<font size="4">

Сущность потоков

</font>
</b>
<br>
</font>
</p>


<P><font face="Arial, Helvetica, sans-serif" size="3">Поток Turbo Vision - это коллекция объектов со специфичным способом хранения 
элементов: для этих целей коллекция-поток использует дисковый файл, отображаемую 
память (EMS-память) или файловое устройство (устройство ввода-вывода данных).</font> 
</P>
<P><font face="Arial, Helvetica, sans-serif" size="3">Весьма удобной моделью потока может служить обычный дисковый файл с прямым 
или последовательным доступом. В дальнейшем, говоря о потоках, я буду в основном 
иметь в виду эту модель, а там, где это необходимо, уточнять детали доступа к 
EMS-памяти и к файловым устройствам.</font> </P>
<P><font face="Arial, Helvetica, sans-serif" size="3">Как известно, в Турбо Паскале могут использоваться типизированные или 
нетипизированные файлы. При работе с типизированными файлами Турбо Паскаль 
осуществляет необходимый котроль за типом данных, предупреждая Вас о возможных 
ошибках; типизированные файлы как правило не обеспечивают высокую скорость 
доступа к данным. При обращении к нетипизированным файлам контроль возлагается 
целиком на программиста, но в этом случае обычно существенно увеличивается 
скорость работы с файлами. Потоки Turbo Vision обеспечивают в известном смысле 
компромисс между обоими способами хранения информации в файле: они позволяют 
компилятору осуществить проверку типов на уровне проверки объектов, но не 
контролируют сами данные, помещаемые в файл, т.к. в правильно сконструированной 
программе объект сам осуществляет необходимые операции с диском и делает это 
безошибочно и очень быстро.</font> </P>
<P><font face="Arial, Helvetica, sans-serif" size="3">Основным отличием потоков от файлов является их полиморфизм. Как и коллекции, 
потоки Turbo Vision могут быть полиморфными, что означает, что в одном потоке 
могут сохраняться разные объекты (точнее, их поля). Как программист, знакомый с 
техникой объектно-ориентированного программирования, Вы должны понимать, что 
записать в один файл несколько разных объектов не составляет особой проблемы - 
для этого нужно лишь</font> <font face="Arial, Helvetica, sans-serif" size="3">вызвать соответствующий виртуальный метод, который знает, какие поля и в 
какой последовательности помещаются в файл. Но вот каким образом поддерживается 
полиморфизм при чтении данных? Как из общего потока выделяются данные, 
относящиеся к конкретному объекту? Эту проблему еще можно было бы решить, если 
бы потоки обеспечивали только последовательный доступ к данным - тогда мы могли 
бы просто вызывать виртуальные методы чтения данных в том же порядке, в каком 
объекты записывались в файл. Но потоки Turbo Vision предоставляют также и 
произвольный способ доступа к данным!</font> </P>
<P><font face="Arial, Helvetica, sans-serif" size="3">Решение проблемы разработчиками Turbo Vision найдено в особом механизме, 
называемом регистрация объектов. Зарегистрировать объект - это означает 
приписать объекту некоторый уникальный регистрационный номер. Регистрационный 
номер записывается в файл (а следовательно и считывается из него) первым. 
Прочитав регистрационный номер, Turbo Vision однозначно определяет объект, 
которому принадлежат данные, и вызывает соответствующий виртуальный метод 
доступа к файлу.</font> </P>
<P><font face="Arial, Helvetica, sans-serif" size="3">Таким образом, для работы с потоками необходимо:</font> </P>
<ul>
  <li><font face="Arial, Helvetica, sans-serif" size="3"> зарегистрировать объекты, которые будут помещаться в поток или 
считываться из него; отметим, что все стандартные объекты Turbo Vision уже имеют 
уникальные регистрационные номера и процедура их регистрации предельно проста 
(см. ниже);</font></li>
  <li><font face="Arial, Helvetica, sans-serif" size="3"> инициировать (создать) поток; в ходе инициации указывается имя файла и 
некоторая другая информация, используемая для обеспечения доступа к файлу;</font></li>
  <li><font face="Arial, Helvetica, sans-serif" size="3"> поместить данные в поток и/или прочитать их из него;</font></li>
  <li><font face="Arial, Helvetica, sans-serif" size="3"> удалить поток.</font></li>
</ul>
<P><font face="Arial, Helvetica, sans-serif" size="3">Важной особенностью доступа к потокам является возможность записи в них групп 
и соответственно чтения групп из потока. При этом группа сама будет 
автоматически вызывать нужную процедуру доступа для каждого из своих элементов, 
что значительно упрощает работу с потоком.</font> </P>

<p>
&nbsp;
</p>
<table COLS="3" width="%">
<tr>
<td>
<font face="Arial, Helvetica, sans-serif">
<a href="gl20.html">
<img SRC="Back.gif" BORDER="0"  >
</a>
</font>
</td>
<td width="%">
<font face="Arial, Helvetica, sans-serif">
<a href="../index.html">
<img SRC="Menu.gif" BORDER="0"  >
</a>
</font>
</td>
<td ALIGN="RIGHT">
<font face="Arial, Helvetica, sans-serif">
<a href="gl20_2.html">
<img SRC="For.gif" BORDER="0"  >
</a>
</font>
</td>
</tr>
</table>


</BODY></HTML>